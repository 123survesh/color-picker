/*!
 * ==========================================================
 *  COLOR PICKER PLUGIN 1.0.0
 * ==========================================================
 * Author: Taufik Nurrohman <http://latitudu.com>
 * Licensed under the MIT license.
 * ----------------------------------------------------------
 */

var CP=function(t){function e(t){return void 0!==t}function n(t){var e,n,r,o,i,s,c,a,u=+t[0],f=+t[1],l=+t[2];switch(o=Math.floor(6*u),i=6*u-o,s=l*(1-f),c=l*(1-i*f),a=l*(1-(1-i)*f),isNaN(o)&&(o=0),isNaN(c)&&(c=0),isNaN(a)&&(a=0),o%6){case 0:e=l,n=a,r=s;break;case 1:e=c,n=l,r=s;break;case 2:e=s,n=l,r=a;break;case 3:e=s,n=c,r=l;break;case 4:e=a,n=s,r=l;break;case 5:e=l,n=s,r=c}return[Math.round(255*e),Math.round(255*n),Math.round(255*r)]}function r(t){return i(n(t))}function o(t){var e,n=+t[0],r=+t[1],o=+t[2],i=Math.max(n,r,o),s=Math.min(n,r,o),c=i-s,a=0===i?0:c/i,u=i/255;switch(i){case s:e=0;break;case n:e=r-o+c*(o>r?6:0),e/=6*c;break;case r:e=o-n+2*c,e/=6*c;break;case o:e=n-r+4*c,e/=6*c}return[e,a,u]}function i(t){var e=+t[2]|+t[1]<<8|+t[0]<<16;return e="000000"+e.toString(16),e.slice(-6)}function s(t){return o(c(t))}function c(t){return 3===t.length&&(t=t.replace(/./g,"$&$&")),[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)]}function a(t){return[1*(+t[0]/360),1-+t[1]/100,1-+t[2]/100]}function u(t){return[Math.round(360*+t[0]),Math.round(100*+t[1]),Math.round(100*+t[2])]}function f(t){var e=/\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i.exec(t),n=/\s*hsv\s*\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)\s*$/i.exec(t),r="#"===t[0]&&t.match(/^#([\da-f]{3}|[\da-f]{6})$/);return r?s(t.slice(1)):n?a([+n[1],+n[2],+n[3]]):e?o([+e[1],+e[2],+e[3]]):[0,1,1]}function l(t,e,n){return e.addEventListener(t,n,!1)}function d(t,e,n){return e.removeEventListener(t,n)}function h(t,e){for(var n=e.touches?e.touches[0].pageX:e.pageX,r=e.touches?e.touches[0].pageY:e.pageY,o=t.offsetLeft,i=t.offsetTop;t=t.offsetParent;)o+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{x:n-o,y:r-i}}function p(t){return{l:t.offsetLeft,t:t.offsetTop}}function v(t){return{w:t.offsetWidth,h:t.offsetHeight}}function g(t,n){var r=t.getAttribute("data-color");return r=r?r.split(","):[],e(n)||(n=!1),3===r.length?[+r[0],+r[1],+r[2]]:n}function m(t,e){return e===!1?t.removeAttribute("data-color"):t.setAttribute("data-color",e.join(","))}function y(t,n,r){return e(E[t])||(E[t]={}),e(t)?e(n)?e(r)?void(E[t][r]=n):E[t][Object.keys(E[t]).length]=n:E[t]:E}function k(t,n){return e(t)?e(n)?void delete E[t][n]:E[t]={}:E={}}function x(t,n,r){if(e(E[t]))if(e(r))e(E[t][r])&&E[t][r].apply({},n);else for(var o in E[t])E[t][o].apply({},n)}function b(){var e=Math.max(v(B).w,v(G).w,w.innerWidth),n=Math.max(v(B).h,v(G).h,w.innerHeight);I=p(t).l,W=p(t).t+v(t).h,I+D>e&&(I=e-D),W+Y>n&&(W=n-Y),V.style.left=I+"px",V.style.top=W+"px",x("fit",[S])}function H(e){function o(t){H(),x("click",[S]),t.stopPropagation(),t.preventDefault()}function i(e){var r=(n(R),n([R[0],1,1]));$.style.backgroundColor="rgb("+r.join(",")+")",m(t,R),e&&e.preventDefault()}function s(t){var e=h(T,t),n=e.y;0>n?n=0:n>k&&(n=k),R[0]=1-(k-n)/k,_.style.top=n-G/2+"px",i(t)}function c(t){var e=h($,t),n=e.x,r=e.y;0>n?n=0:n>E&&(n=E),0>r?r=0:r>N&&(r=N),R[1]=1-(E-n)/E,R[2]=(N-r)/N,A.style.right=E-n-L/2+"px",A.style.top=r-I/2+"px",i(t)}function a(t){P&&(s(t),y=r(R),x("drag:h",[y,S]),x("drag",[y,S])),j&&(c(t),y=r(R),x("drag:sv",[y,S]),x("drag",[y,S]))}function u(){P=!1,j=!1,e||x("stop",[r(R),S])}function f(t){P=!0,s(t),x("start:h",[S]),x("start",[S])}function p(t){j=!0,c(t),x("start:sv",[S]),x("start",[S])}e||B.appendChild(V),D=v(V).w,Y=v(V).h;var y,k=v(T).h,E=v($).w,N=v($).h,G=v(_).h,L=v(A).w,I=v(A).h;e?(V.style.left="-9999px",V.style.top="-9999px",l("resize",w,b),l("click",t,o),S.create=function(){H(1),x("create",[S])},S.destroy=function(){d("click",t,o),m(t,!1),C(),x("destroy",[S])}):(b(),x("enter",[S])),X=function(){R=g(t,R),i(),_.style.top=k*+R[0]-G/2+"px",A.style.right=E-L/2-E*+R[1]+"px",A.style.top=N-I/2-N*+R[2]+"px"},C=function(){V.parentNode&&B.removeChild(V),d("touchmove",M,a),d("mousemove",M,a),d("touchend",M,u),d("mouseup",M,u),d("touchdown",M,C),d("click",M,C),x("exit",[S])},X(),l("touchstart",T,f),l("mousedown",T,f),l("touchstart",$,p),l("mousedown",$,p),l("touchmove",M,a),l("mousemove",M,a),l("touchend",M,u),l("mouseup",M,u),l("touchdown",M,C),l("click",M,C)}var w=window,M=document,S=this,E={},V=M.createElement("div");if(t.value&&t.value.length)m(t,f(t.value));else if(!t.value){var N=g(t,t.getAttribute("data-color"));N&&m(t,f(N))}V.className="color-picker",V.innerHTML='<div class="color-picker-control"><span class="color-picker-h"><i></i></span><span class="color-picker-sv"><i></i></span></div>';var X,C,B=M.body,G=M.documentElement,L=V.firstChild.children,R=g(t,[0,1,1]),T=L[0],$=L[1],_=T.firstChild,A=$.firstChild,P=!1,j=!1,I=0,W=0,D=0,Y=0;return H(1),w.setTimeout(function(){x("create",[r(R),S])},.1),S.target=t,S.picker=V,S.on=y,S.off=k,S.trigger=x,S.fit=b,S.set=function(n){return"string"==typeof n&&(n=f(n)),e(n)?(m(t,n),void X()):g(t)},S.HSV2RGB=function(t){return n(a(t))},S._HSV2RGB=n,S.HSV2HEX=function(t){return r(a(t))},S._HSV2HEX=r,S.RGB2HSV=function(t){return u(o(t))},S._RGB2HSV=o,S.RGB2HEX=i,S.HEX2HSV=function(t){return u(s(t))},S._HEX2HSV=s,S.HEX2RGB=c,S._2HSV=f,S.hooks=E,S.enter=H,S.exit=C,S};