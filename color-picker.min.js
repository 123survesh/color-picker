/*!
 * ==========================================================
 *  COLOR PICKER PLUGIN 1.0.3
 * ==========================================================
 * Author: Taufik Nurrohman <http://latitudu.com>
 * License: MIT
 * ----------------------------------------------------------
 */
var CP=function(t){function e(t){return void 0!==t}function n(t,e,n){return e>t?e:t>n?n:t}function r(t){var e,n,r,o,c,s,u,i,a=+t[0],f=+t[1],h=+t[2];switch(o=Math.floor(6*a),c=6*a-o,s=h*(1-f),u=h*(1-c*f),i=h*(1-(1-c)*f),isNaN(o)&&(o=0),isNaN(u)&&(u=0),isNaN(i)&&(i=0),o%6){case 0:e=h,n=i,r=s;break;case 1:e=u,n=h,r=s;break;case 2:e=s,n=h,r=i;break;case 3:e=s,n=u,r=h;break;case 4:e=i,n=s,r=h;break;case 5:e=h,n=s,r=u}return[Math.round(255*e),Math.round(255*n),Math.round(255*r)]}function o(t){return s(r(t))}function c(t){var e,n=+t[0],r=+t[1],o=+t[2],c=Math.max(n,r,o),s=Math.min(n,r,o),u=c-s,i=0===c?0:u/c,a=c/255;switch(c){case s:e=0;break;case n:e=r-o+u*(o>r?6:0),e/=6*u;break;case r:e=o-n+2*u,e/=6*u;break;case o:e=n-r+4*u,e/=6*u}return[e,i,a]}function s(t){var e=+t[2]|+t[1]<<8|+t[0]<<16;return e="000000"+e.toString(16),e.slice(-6)}function u(t){return c(i(t))}function i(t){return 3===t.length&&(t=t.replace(/./g,"$&$&")),[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)]}function a(t){return[+t[0]/360,+t[1]/100,+t[2]/100]}function f(t){return[Math.round(360*+t[0]),Math.round(100*+t[1]),Math.round(100*+t[2])]}function h(t,e,n){return e.addEventListener(t,n,!1)}function l(t,e,n){return e.removeEventListener(t,n)}function p(t,e){for(var n=e.touches?e.touches[0].pageX:e.pageX,r=e.touches?e.touches[0].pageY:e.pageY,o=d(t).l,c=d(t).t;t=t.offsetParent;)o+=d(t).l,c+=d(t).t;return{x:n-o,y:r-c}}function d(t){return{l:t.offsetLeft,t:t.offsetTop}}function v(t){return{w:t.offsetWidth,h:t.offsetHeight}}function g(t){return V||(e(t)?t:!1)}function m(t){V=t}function y(t,n,r){return e(t)?e(n)?(e(X[t])||(X[t]={}),e(r)||(r=Object.keys(X[t]).length),X[t][r]=n,S):X[t]:X}function k(t,n){return e(t)?e(n)?(delete X[t][n],S):(X[t]={},S):(X={},S)}function x(t,n,r){if(!e(X[t]))return S;if(e(r))e(X[t][r])&&X[t][r].apply(S,n);else for(var o in X[t])X[t][o].apply(S,n);return S}function H(t,e){t&&"h"!==t||x("change:h",e),t&&"sv"!==t||x("change:sv",e),x("change",e)}function b(t,e){return E.setTimeout(t,e)}function w(){var e=v(R).w,n=E.innerHeight,r=Math.max(L.scrollLeft,R.scrollLeft),o=Math.max(L.scrollTop,R.scrollTop),c=e+r,s=n+o;return O=d(t).l,W=d(t).t+v(t).h,O+q>c&&(O=c-q),W+F>s&&(W=s-F),C.style.left=O+"px",C.style.top=W+"px",x("fit",[S]),S}function M(e){function c(t){b(function(){M(),x("click",[S])},.1),t.preventDefault()}function s(t){var e=(r($),r([$[0],1,1]));j.style.backgroundColor="rgb("+e.join(",")+")",m($),t&&t.preventDefault()}function u(t){var e=n(p(_,t).y,0,k);$[0]=(k-e)/k,I.style.top=e-R/2+"px",s(t)}function i(t){var e=p(j,t),r=n(e.x,0,V),o=n(e.y,0,X);$[1]=1-(V-r)/V,$[2]=(X-o)/X,D.style.right=V-r-T/2+"px",D.style.top=o-O/2+"px",s(t)}function a(t){z&&(u(t),J=o($),P||(x("drag:h",[J,S]),x("drag",[J,S])),H("h",[J,S])),A&&(i(t),J=o($),Y||(x("drag:sv",[J,S]),x("drag",[J,S])),H("sv",[J,S])),P=!1,Y=!1}function f(){if(!e){var t=z?"h":"sv",n=[o($),S];x("stop:"+t,n),x("stop",n),H(t,n)}z=!1,A=!1}function d(t){P=!0,z=!0,a(t),x("start:h",[J,S]),x("start",[J,S]),H("h",[J,S])}function y(t){Y=!0,A=!0,a(t),x("start:sv",[J,S]),x("start",[J,S]),H("sv",[J,S])}e||L.appendChild(C),q=v(C).w,F=v(C).h;var k=v(_).h,V=v(j).w,X=v(j).h,R=v(I).h,T=v(D).w,O=v(D).h;e?(C.style.left="-9999px",C.style.top="-9999px",h("resize",E,w),h("touchdown",t,c),h("click",t,c),S.create=function(){return M(1),x("create",[S]),S},S.destroy=function(){return l("touchdown",t,c),l("click",t,c),m(!1),G(),x("destroy",[S]),S}):(w(),x("enter",[S])),B=function(){$=g($),s(),I.style.top=k-R/2-k*+$[0]+"px",D.style.right=V-T/2-V*+$[1]+"px",D.style.top=X-O/2-X*+$[2]+"px"},G=function(){return C.parentNode&&C.parentNode.removeChild(C),l("touchmove",N,a),l("mousemove",N,a),l("touchend",N,f),l("mouseup",N,f),l("touchdown",N,G),l("click",N,G),x("exit",[S]),S},B(),h("touchstart",_,d),h("mousedown",_,d),h("touchstart",j,y),h("mousedown",j,y),h("touchmove",N,a),h("mousemove",N,a),h("touchend",N,f),h("mouseup",N,f),h("touchdown",N,G),h("click",N,G)}var E=window,N=document,S=this,V=!1,X={},C=N.createElement("div");S.parse=function(t){if("object"==typeof t)return t;var e=/\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i.exec(t),n=/\s*hsv\s*\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)\s*$/i.exec(t),r="#"===t[0]&&t.match(/^#([\da-f]{3}|[\da-f]{6})$/);return r?u(t.slice(1)):n?a([+n[1],+n[2],+n[3]]):e?c([+e[1],+e[2],+e[3]]):[0,1,1]},m(S.parse(t.getAttribute("data-color")||t.value||[0,1,1])),C.className="color-picker",C.innerHTML='<div class="color-picker-control"><span class="color-picker-h"><i></i></span><span class="color-picker-sv"><i></i></span></div>';var B,G,L=N.body,R=N.documentElement,T=C.firstChild.children,$=g([0,1,1]),_=T[0],j=T[1],I=_.firstChild,D=j.firstChild,P=!1,Y=!1,z=!1,A=!1,O=0,W=0,q=0,F=0,J=o($);return M(1),b(function(){J=o($),x("create",[J,S]),H(0,[J,S])},.1),S.target=t,S.picker=C,S.on=y,S.off=k,S.trigger=x,S.fit=w,S.set=function(t){return e(t)?("string"==typeof t&&(t=S.parse(t)),m(t),B(),S):g()},S.HSV2RGB=function(t){return r(a(t))},S._HSV2RGB=r,S.HSV2HEX=function(t){return o(a(t))},S._HSV2HEX=o,S.RGB2HSV=function(t){return f(c(t))},S._RGB2HSV=c,S.RGB2HEX=s,S.HEX2HSV=function(t){return f(u(t))},S._HEX2HSV=u,S.HEX2RGB=i,S.hooks=X,S.enter=M,S.exit=G,S};