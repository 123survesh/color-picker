/*!
 * ==========================================================
 *  COLOR PICKER PLUGIN 1.3.1
 * ==========================================================
 * Author: Taufik Nurrohman <https://github.com/tovic>
 * License: MIT
 * ----------------------------------------------------------
 */
!function(e,t){function s(e){return"undefined"!=typeof e}function u(e){return"string"==typeof e}function l(e,t,n){return t>e?t:e>n?n:e}function a(e,t){return parseInt(e,t||10)}function c(e){return Math.round(e)}function d(e){var r,o,f,s,u,l,a,d,t=+e[0],n=+e[1],i=+e[2];switch(s=Math.floor(6*t),u=6*t-s,l=i*(1-n),a=i*(1-u*n),d=i*(1-(1-u)*n),s=s||0,a=a||0,d=d||0,s%6){case 0:r=i,o=d,f=l;break;case 1:r=a,o=i,f=l;break;case 2:r=l,o=i,f=d;break;case 3:r=l,o=a,f=i;break;case 4:r=d,o=l,f=i;break;case 5:r=i,o=l,f=a}return[c(255*r),c(255*o),c(255*f)]}function p(e){return h(d(e))}function b(e){var s,t=+e[0],n=+e[1],i=+e[2],r=Math.max(t,n,i),o=Math.min(t,n,i),f=r-o,u=0===r?0:f/r,l=r/255;switch(r){case o:s=0;break;case t:s=n-i+f*(i>n?6:0),s/=6*f;break;case n:s=i-t+2*f,s/=6*f;break;case i:s=t-n+4*f,s/=6*f}return[s,u,l]}function h(e){var t=+e[2]|+e[1]<<8|+e[0]<<16;return t="000000"+t.toString(16),t.slice(-6)}function y(e){return b(g(e))}function g(e){return 3===e.length&&(e=e.replace(/./g,"$&$&")),[a(e[0]+e[1],16),a(e[2]+e[3],16),a(e[4]+e[5],16)]}function v(e){return[+e[0]/360,+e[1]/100,+e[2]/100]}function m(e){return[c(360*+e[0]),c(100*+e[1]),c(100*+e[2])]}function x(e){return[+e[0]/255,+e[1]/255,+e[2]/255]}function k(e){if("object"==typeof e)return e;var t=/\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i.exec(e),n=/\s*hsv\s*\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)\s*$/i.exec(e),i="#"===e[0]&&e.match(/^#([\da-f]{3}|[\da-f]{6})$/i);return i?y(e.slice(1)):n?v([+n[1],+n[2],+n[3]]):t?b([+t[1],+t[2],+t[3]]):[0,1,1]}var n="__instance__",i="firstChild",r="scrollLeft",o="scrollTop",f=setTimeout;!function(e){e.version="1.3.0",e[n]={},e.each=function(t,i){return f(function(){var r,i=e[n];for(r in i)t(i[r],r,i)},0===i?0:i||1),e},e.parse=k,e._HSV2RGB=d,e._HSV2HEX=p,e._RGB2HSV=b,e._HEX2HSV=y,e._HEX2RGB=function(e){return x(g(e))},e.HSV2RGB=function(e){return d(v(e))},e.HSV2HEX=function(e){return p(v(e))},e.RGB2HSV=function(e){return m(b(e))},e.RGB2HEX=h,e.HEX2HSV=function(e){return m(y(e))},e.HEX2RGB=g}(e.CP=function(a,c){function w(e,t,n){e=e.split(/\s+/);for(var i=0,r=e.length;r>i;++i)t.addEventListener(e[i],n,!1)}function E(e,t,n){e=e.split(/\s+/);for(var i=0,r=e.length;r>i;++i)t.removeEventListener(e[i],n)}function T(e,t){for(var n=t.touches?t.touches[0].pageX:t.pageX,i=t.touches?t.touches[0].pageY:t.pageY,r=$(e).l,o=$(e).t;e=e.offsetParent;)r+=$(e).l,o+=$(e).t;return{x:n-r,y:i-o}}function $(e){return{l:e.offsetLeft,t:e.offsetTop}}function L(e,t){for(;(e=e.parentElement)&&e!==t;);return e}function z(e){e&&e.preventDefault()}function _(e){return{w:e.offsetWidth,h:e.offsetHeight}}function O(e){return h||(s(e)?e:!1)}function C(e){h=e}function M(e,t,n){return s(e)?s(t)?(s(y[e])||(y[e]={}),s(n)||(n=Object.keys(y[e]).length),y[e][n]=t,b):y[e]:y}function H(e,t){return s(e)?s(t)?(delete y[e][t],b):(y[e]={},b):(y={},b)}function B(e,t,n){if(!s(y[e]))return b;if(s(n))s(y[e][n])&&y[e][n].apply(b,t);else for(var i in y[e])y[e][i].apply(b,t);return b}function Q(e,t){e&&"h"!==e||B("change:h",t),e&&"sv"!==e||B("change:sv",t),B("change",t)}function ee(){return g.parentNode}function te(){var t=_(Y).w,n=e.innerHeight,i=Math.max(j[r],Y[r]),f=Math.max(j[o],Y[o]),s=t+i,u=n+f;return q=$(a).l,K=$(a).t+_(a).h,q+U>s&&(q=s-U),K+Z>u&&(K=u-Z),g.style.left=q+"px",g.style.top=K+"px",B("fit",[b]),b}function ne(n,i){function y(e){var t=e.target,n=t===a||L(t,a)===a;n?ne():J(),B(n?"enter":"exit",[b])}function $(e){var n=(d(S),d([S[0],1,1]));A.style.backgroundColor="rgb("+n.join(",")+")",C(S),z(e)}function M(e){var t=l(T(D,e).y,0,r);S[0]=(r-t)/r,F.style.top=t-s/2+"px",$(e)}function H(e){var t=T(A,e),n=l(t.x,0,o),i=l(t.y,0,f);S[1]=1-(o-n)/o,S[2]=(f-i)/f,I.style.right=o-n-u/2+"px",I.style.top=i-h/2+"px",$(e)}function Y(e){P&&(M(e),G=p(S),W||(B("drag:h",[G,b]),B("drag",[G,b]),Q("h",[G,b]))),R&&(H(e),G=p(S),X||(B("drag:sv",[G,b]),B("drag",[G,b]),Q("sv",[G,b]))),W=!1,X=!1}function N(e){var t=e.target,n=P?"h":"sv",i=[p(S),b],r=t===a||L(t,a)===a,o=t===g||L(t,g)===g;r||o?o&&(B("stop:"+n,i),B("stop",i),Q(n,i)):ee()&&c!==!1&&(J(),B("exit",[b]),Q(0,i)),P=!1,R=!1}function q(e){W=!0,P=!0,Y(e),z(e),B("start:h",[G,b]),B("start",[G,b]),Q("h",[G,b])}function K(e){X=!0,R=!0,Y(e),z(e),B("start:sv",[G,b]),B("start",[G,b]),Q("sv",[G,b])}n||((i||j).appendChild(g),b.visible=!0),U=_(g).w,Z=_(g).h;var r=_(D).h,o=_(A).w,f=_(A).h,s=_(F).h,u=_(I).w,h=_(I).h;n?(g.style.left=g.style.top="-9999px",c!==!1&&w(c,a,y),b.create=function(){return ne(1),B("create",[b]),b},b.destroy=function(){return c!==!1&&E(c,a,y),J(),C(!1),B("destroy",[b]),b}):te(),V=function(){S=O(S),$(),F.style.top=r-s/2-r*+S[0]+"px",I.style.right=o-u/2-o*+S[1]+"px",I.style.top=f-h/2-f*+S[2]+"px"},J=function(n){return ee()&&(ee().removeChild(g),b.visible=!1),E(v,D,q),E(v,A,K),E(m,t,Y),E(x,t,N),E(k,e,te),b},V(),n||(w(v,D,q),w(v,A,K),w(m,t,Y),w(x,t,N),w(k,e,te))}var b=this,h=!1,y={},g=t.createElement("div"),v="touchstart mousedown",m="touchmove mousemove",x="touchend mouseup",k="orientationchange resize";if(!(b instanceof CP))return new CP(a,c);CP[n][a.id||a.name||Object.keys(CP[n]).length]=b,s(c)||(c=v),C(CP.parse(a.getAttribute("data-color")||a.value||[0,1,1])),g.className="color-picker",g.innerHTML='<div class="color-picker-control"><span class="color-picker-h"><i></i></span><span class="color-picker-sv"><i></i></span></div>';var V,J,j=t.body,Y=t.documentElement,N=g[i].children,S=O([0,1,1]),D=N[0],A=N[1],F=D[i],I=A[i],W=!1,X=!1,P=!1,R=!1,q=0,K=0,U=0,Z=0,G=p(S);return ne(1),f(function(){var e=[p(S),b];B("create",e),Q(0,e)},0),b.target=a,b.picker=g,b.visible=!1,b.on=M,b.off=H,b.trigger=B,b.fit=te,b.set=function(e){return s(e)?(u(e)&&(e=CP.parse(e)),C(e),V(),b):O()},b.hooks=y,b.enter=function(e){return ne(0,e)},b.exit=J,b})}(window,document);