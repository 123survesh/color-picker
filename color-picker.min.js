/*!
 * ==========================================================
 *  COLOR PICKER PLUGIN 1.0.2
 * ==========================================================
 * Author: Taufik Nurrohman <http://latitudu.com>
 * License: MIT
 * ----------------------------------------------------------
 */
var CP=function(t){function e(t){return void 0!==t}function n(t,e,n){return e>t?e:t>n?n:t}function r(t){var e,n,r,o,c,s,u,i,a=+t[0],f=+t[1],l=+t[2];switch(o=Math.floor(6*a),c=6*a-o,s=l*(1-f),u=l*(1-c*f),i=l*(1-(1-c)*f),isNaN(o)&&(o=0),isNaN(u)&&(u=0),isNaN(i)&&(i=0),o%6){case 0:e=l,n=i,r=s;break;case 1:e=u,n=l,r=s;break;case 2:e=s,n=l,r=i;break;case 3:e=s,n=u,r=l;break;case 4:e=i,n=s,r=l;break;case 5:e=l,n=s,r=u}return[Math.round(255*e),Math.round(255*n),Math.round(255*r)]}function o(t){return s(r(t))}function c(t){var e,n=+t[0],r=+t[1],o=+t[2],c=Math.max(n,r,o),s=Math.min(n,r,o),u=c-s,i=0===c?0:u/c,a=c/255;switch(c){case s:e=0;break;case n:e=r-o+u*(o>r?6:0),e/=6*u;break;case r:e=o-n+2*u,e/=6*u;break;case o:e=n-r+4*u,e/=6*u}return[e,i,a]}function s(t){var e=+t[2]|+t[1]<<8|+t[0]<<16;return e="000000"+e.toString(16),e.slice(-6)}function u(t){return c(i(t))}function i(t){return 3===t.length&&(t=t.replace(/./g,"$&$&")),[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)]}function a(t){return[+t[0]/360,+t[1]/100,+t[2]/100]}function f(t){return[Math.round(360*+t[0]),Math.round(100*+t[1]),Math.round(100*+t[2])]}function l(t,e,n){return e.addEventListener(t,n,!1)}function h(t,e,n){return e.removeEventListener(t,n)}function p(t,e){for(var n=e.touches?e.touches[0].pageX:e.pageX,r=e.touches?e.touches[0].pageY:e.pageY,o=d(t).l,c=d(t).t;t=t.offsetParent;)o+=d(t).l,c+=d(t).t;return{x:n-o,y:r-c}}function d(t){return{l:t.offsetLeft,t:t.offsetTop}}function v(t){return{w:t.offsetWidth,h:t.offsetHeight}}function g(t){return S||(e(t)?t:!1)}function m(t){S=t}function y(t,n,r){return e(t)?e(n)?(e(V[t])||(V[t]={}),e(r)||(r=Object.keys(V[t]).length),V[t][r]=n,N):V[t]:V}function k(t,n){return e(t)?e(n)?(delete V[t][n],N):(V[t]={},N):(V={},N)}function x(t,n,r){if(!e(V[t]))return N;if(e(r))e(V[t][r])&&V[t][r].apply(N,n);else for(var o in V[t])V[t][o].apply(N,n);return N}function H(t,e){t&&"h"!==t||x("change:h",e),t&&"sv"!==t||x("change:sv",e),x("change",e)}function b(){var e=v(L).w,n=M.innerHeight,r=Math.max(G.scrollLeft,L.scrollLeft),o=Math.max(G.scrollTop,L.scrollTop),c=e+r,s=n+o;return A=d(t).l,O=d(t).t+v(t).h,A+W>c&&(A=c-W),O+q>s&&(O=s-q),X.style.left=A+"px",X.style.top=O+"px",x("fit",[N]),N}function w(e){function c(t){w(),x("click",[N]),t.stopPropagation(),t.preventDefault()}function s(t){var e=(r(T),r([T[0],1,1]));_.style.backgroundColor="rgb("+e.join(",")+")",m(T),t&&t.preventDefault()}function u(t){var e=n(p($,t).y,0,k);T[0]=(k-e)/k,j.style.top=e-L/2+"px",s(t)}function i(t){var e=p(_,t),r=n(e.x,0,S),o=n(e.y,0,V);T[1]=1-(S-r)/S,T[2]=(V-o)/V,I.style.right=S-r-R/2+"px",I.style.top=o-A/2+"px",s(t)}function a(t){Y&&(u(t),F=o(T),P||(x("drag:h",[F,N]),x("drag",[F,N])),H("h",[F,N])),z&&(i(t),F=o(T),D||(x("drag:sv",[F,N]),x("drag",[F,N])),H("sv",[F,N])),P=!1,D=!1}function f(){if(!e){var t=Y?"h":"sv";x("stop:"+t,[F,N]),x("stop",[F,N]),H(t,[F,N])}Y=!1,z=!1}function d(t){P=!0,Y=!0,a(t),x("start:h",[F,N]),x("start",[F,N]),H("h",[F,N])}function y(t){D=!0,z=!0,a(t),x("start:sv",[F,N]),x("start",[F,N]),H("sv",[F,N])}e||G.appendChild(X),W=v(X).w,q=v(X).h;var k=v($).h,S=v(_).w,V=v(_).h,L=v(j).h,R=v(I).w,A=v(I).h;e?(X.style.left="-9999px",X.style.top="-9999px",l("resize",M,b),l("click",t,c),N.create=function(){return w(1),x("create",[N]),N},N.destroy=function(){return h("click",t,c),m(!1),B(),x("destroy",[N]),N}):(b(),x("enter",[N])),C=function(){T=g(T),s(),j.style.top=k-L/2-k*+T[0]+"px",I.style.right=S-R/2-S*+T[1]+"px",I.style.top=V-A/2-V*+T[2]+"px"},B=function(){return X.parentNode&&X.parentNode.removeChild(X),h("touchmove",E,a),h("mousemove",E,a),h("touchend",E,f),h("mouseup",E,f),h("touchdown",E,B),h("click",E,B),x("exit",[N]),N},C(),l("touchstart",$,d),l("mousedown",$,d),l("touchstart",_,y),l("mousedown",_,y),l("touchmove",E,a),l("mousemove",E,a),l("touchend",E,f),l("mouseup",E,f),l("touchdown",E,B),l("click",E,B)}var M=window,E=document,N=this,S=!1,V={},X=E.createElement("div");N.parse=function(t){if("object"==typeof t)return t;var e=/\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i.exec(t),n=/\s*hsv\s*\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)\s*$/i.exec(t),r="#"===t[0]&&t.match(/^#([\da-f]{3}|[\da-f]{6})$/);return r?u(t.slice(1)):n?a([+n[1],+n[2],+n[3]]):e?c([+e[1],+e[2],+e[3]]):[0,1,1]},m(N.parse(t.getAttribute("data-color")||t.value||[0,1,1])),X.className="color-picker",X.innerHTML='<div class="color-picker-control"><span class="color-picker-h"><i></i></span><span class="color-picker-sv"><i></i></span></div>';var C,B,G=E.body,L=E.documentElement,R=X.firstChild.children,T=g([0,1,1]),$=R[0],_=R[1],j=$.firstChild,I=_.firstChild,P=!1,D=!1,Y=!1,z=!1,A=0,O=0,W=0,q=0,F=o(T);return w(1),M.setTimeout(function(){F=o(T),x("create",[F,N]),H(0,[F,N])},.1),N.target=t,N.picker=X,N.on=y,N.off=k,N.trigger=x,N.fit=b,N.set=function(t){return e(t)?("string"==typeof t&&(t=N.parse(t)),m(t),C(),N):g()},N.HSV2RGB=function(t){return r(a(t))},N._HSV2RGB=r,N.HSV2HEX=function(t){return o(a(t))},N._HSV2HEX=o,N.RGB2HSV=function(t){return f(c(t))},N._RGB2HSV=c,N.RGB2HEX=s,N.HEX2HSV=function(t){return f(u(t))},N._HEX2HSV=u,N.HEX2RGB=i,N.hooks=V,N.enter=w,N.exit=B,N};