/*!
 * ==========================================================
 *  COLOR PICKER PLUGIN 1.0.0
 * ==========================================================
 * Author: Taufik Nurrohman <http://latitudu.com>
 * Licensed under the MIT license.
 * ----------------------------------------------------------
 */

var CP=function(t){function e(t){return void 0!==t}function n(t){var e,n,r,o,i,u,s,a,c=+t[0],f=+t[1],l=+t[2];switch(o=Math.floor(6*c),i=6*c-o,u=l*(1-f),s=l*(1-i*f),a=l*(1-(1-i)*f),isNaN(o)&&(o=0),isNaN(s)&&(s=0),isNaN(a)&&(a=0),o%6){case 0:e=l,n=a,r=u;break;case 1:e=s,n=l,r=u;break;case 2:e=u,n=l,r=a;break;case 3:e=u,n=s,r=l;break;case 4:e=a,n=u,r=l;break;case 5:e=l,n=u,r=s}return[Math.round(255*e),Math.round(255*n),Math.round(255*r)]}function r(t){return i(n(t))}function o(t){var e,n=+t[0],r=+t[1],o=+t[2],i=Math.max(n,r,o),u=Math.min(n,r,o),s=i-u,a=0===i?0:s/i,c=i/255;switch(i){case u:e=0;break;case n:e=r-o+s*(o>r?6:0),e/=6*s;break;case r:e=o-n+2*s,e/=6*s;break;case o:e=n-r+4*s,e/=6*s}return[e,a,c]}function i(t){var e=+t[2]|+t[1]<<8|+t[0]<<16;return e="000000"+e.toString(16),e.slice(-6)}function u(t){return o(s(t))}function s(t){return 3===t.length&&(t=t.replace(/./g,"$&$&")),[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)]}function a(t){return[1*(+t[0]/360),1-+t[1]/100,1-+t[2]/100]}function c(t){return[Math.round(360*+t[0]),Math.round(100*+t[1]),Math.round(100*+t[2])]}function f(t){var e=/\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i.exec(t),n=/\s*hsv\s*\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)\s*$/i.exec(t),r="#"===t[0]&&t.match(/^#([\da-f]{3}|[\da-f]{6})$/);return r?u(t.slice(1)):n?a([+n[1],+n[2],+n[3]]):e?o([+e[1],+e[2],+e[3]]):[0,1,1]}function l(t,e,n){return e.addEventListener(t,n,!1)}function h(t,e,n){return e.removeEventListener(t,n)}function d(t,e){for(var n=e.touches?e.touches[0].pageX:e.pageX,r=e.touches?e.touches[0].pageY:e.pageY,o=t.offsetLeft,i=t.offsetTop;t=t.offsetParent;)o+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{x:n-o,y:r-i}}function p(t){return{l:t.offsetLeft,t:t.offsetTop}}function v(t){return{w:t.offsetWidth,h:t.offsetHeight}}function g(t,n){var r=t.getAttribute("data-color");return r=r?r.split(","):[],e(n)||(n=!1),3===r.length?[+r[0],+r[1],+r[2]]:n}function m(t,e){return e===!1?t.removeAttribute("data-color"):t.setAttribute("data-color",e.join(","))}function k(t,n,r){return e(S[t])||(S[t]={}),e(t)?e(n)?e(r)?(S[t][r]=n,E):(S[t][Object.keys(S[t]).length]=n,E):(S[t],E):E}function y(t,n){return e(t)?e(n)?(delete S[t][n],E):(S[t]={},E):(S={},E)}function x(t,n,r){if(!e(S[t]))return E;if(e(r))e(S[t][r])&&S[t][r].apply(E,n);else for(var o in S[t])S[t][o].apply(E,n);return E}function H(){var e=v(B).w,n=v(G).h,r=v(G).w,o=v(G).h,i=Math.max(e,r,w.innerWidth-e),u=Math.max(n,o,w.innerHeight-n);return I=p(t).l,D=p(t).t+v(t).h,I+W>i&&(I=i-W),D+Y>u&&(D=u-Y),V.style.left=I+"px",V.style.top=D+"px",x("fit",[E]),E}function b(e){function o(t){b(),x("click",[E]),t.stopPropagation(),t.preventDefault()}function i(e){var r=(n(R),n([R[0],1,1]));$.style.backgroundColor="rgb("+r.join(",")+")",m(t,R),e&&e.preventDefault()}function u(t){var e=d(T,t),n=e.y;0>n?n=0:n>y&&(n=y),R[0]=1-(y-n)/y,_.style.top=n-G/2+"px",i(t)}function s(t){var e=d($,t),n=e.x,r=e.y;0>n?n=0:n>S&&(n=S),0>r?r=0:r>N&&(r=N),R[1]=1-(S-n)/S,R[2]=(N-r)/N,A.style.right=S-n-L/2+"px",A.style.top=r-I/2+"px",i(t)}function a(t){P&&(u(t),k=r(R),x("drag:h",[k,E]),x("drag",[k,E])),j&&(s(t),k=r(R),x("drag:sv",[k,E]),x("drag",[k,E]))}function c(){P=!1,j=!1,e||x("stop",[r(R),E])}function f(t){P=!0,u(t),x("start:h",[E]),x("start",[E])}function p(t){j=!0,s(t),x("start:sv",[E]),x("start",[E])}e||B.appendChild(V),W=v(V).w,Y=v(V).h;var k,y=v(T).h,S=v($).w,N=v($).h,G=v(_).h,L=v(A).w,I=v(A).h;e?(V.style.left="-9999px",V.style.top="-9999px",l("resize",w,H),l("click",t,o),E.create=function(){return b(1),x("create",[E]),E},E.destroy=function(){return h("click",t,o),m(t,!1),C(),x("destroy",[E]),E}):(H(),x("enter",[E])),X=function(){R=g(t,R),i(),_.style.top=y*+R[0]-G/2+"px",A.style.right=S-L/2-S*+R[1]+"px",A.style.top=N-I/2-N*+R[2]+"px"},C=function(){return V.parentNode&&B.removeChild(V),h("touchmove",M,a),h("mousemove",M,a),h("touchend",M,c),h("mouseup",M,c),h("touchdown",M,C),h("click",M,C),x("exit",[E]),E},X(),l("touchstart",T,f),l("mousedown",T,f),l("touchstart",$,p),l("mousedown",$,p),l("touchmove",M,a),l("mousemove",M,a),l("touchend",M,c),l("mouseup",M,c),l("touchdown",M,C),l("click",M,C)}var w=window,M=document,E=this,S={},V=M.createElement("div");if(t.value&&t.value.length)m(t,f(t.value));else if(!t.value){var N=g(t,t.getAttribute("data-color"));N&&m(t,f(N))}V.className="color-picker",V.innerHTML='<div class="color-picker-control"><span class="color-picker-h"><i></i></span><span class="color-picker-sv"><i></i></span></div>';var X,C,B=M.body,G=M.documentElement,L=V.firstChild.children,R=g(t,[0,1,1]),T=L[0],$=L[1],_=T.firstChild,A=$.firstChild,P=!1,j=!1,I=0,D=0,W=0,Y=0;return b(1),w.setTimeout(function(){x("create",[r(R),E])},.1),E.target=t,E.picker=V,E.on=k,E.off=y,E.trigger=x,E.fit=H,E.set=function(n){return"string"==typeof n&&(n=f(n)),e(n)?(m(t,n),X(),E):g(t)},E.HSV2RGB=function(t){return n(a(t))},E._HSV2RGB=n,E.HSV2HEX=function(t){return r(a(t))},E._HSV2HEX=r,E.RGB2HSV=function(t){return c(o(t))},E._RGB2HSV=o,E.RGB2HEX=i,E.HEX2HSV=function(t){return c(u(t))},E._HEX2HSV=u,E.HEX2RGB=s,E._2HSV=f,E.hooks=S,E.enter=b,E.exit=C,E};