/*!
 * ==========================================================
 *  COLOR PICKER PLUGIN 1.0.4
 * ==========================================================
 * Author: Taufik Nurrohman <http://latitudu.com>
 * License: MIT
 * ----------------------------------------------------------
 */
var CP=function(t){function e(t){return void 0!==t}function n(t,e,n){return e>t?e:t>n?n:t}function r(t){var e,n,r,o,c,u,s,i,a=+t[0],f=+t[1],l=+t[2];switch(o=Math.floor(6*a),c=6*a-o,u=l*(1-f),s=l*(1-c*f),i=l*(1-(1-c)*f),isNaN(o)&&(o=0),isNaN(s)&&(s=0),isNaN(i)&&(i=0),o%6){case 0:e=l,n=i,r=u;break;case 1:e=s,n=l,r=u;break;case 2:e=u,n=l,r=i;break;case 3:e=u,n=s,r=l;break;case 4:e=i,n=u,r=l;break;case 5:e=l,n=u,r=s}return[Math.round(255*e),Math.round(255*n),Math.round(255*r)]}function o(t){return u(r(t))}function c(t){var e,n=+t[0],r=+t[1],o=+t[2],c=Math.max(n,r,o),u=Math.min(n,r,o),s=c-u,i=0===c?0:s/c,a=c/255;switch(c){case u:e=0;break;case n:e=r-o+s*(o>r?6:0),e/=6*s;break;case r:e=o-n+2*s,e/=6*s;break;case o:e=n-r+4*s,e/=6*s}return[e,i,a]}function u(t){var e=+t[2]|+t[1]<<8|+t[0]<<16;return e="000000"+e.toString(16),e.slice(-6)}function s(t){return c(i(t))}function i(t){return 3===t.length&&(t=t.replace(/./g,"$&$&")),[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)]}function a(t){return[+t[0]/360,+t[1]/100,+t[2]/100]}function f(t){return[Math.round(360*+t[0]),Math.round(100*+t[1]),Math.round(100*+t[2])]}function l(t,e,n){return e.addEventListener(t,n,!1)}function h(t,e,n){return e.removeEventListener(t,n)}function p(t,e){for(var n=e.touches?e.touches[0].pageX:e.pageX,r=e.touches?e.touches[0].pageY:e.pageY,o=d(t).l,c=d(t).t;t=t.offsetParent;)o+=d(t).l,c+=d(t).t;return{x:n-o,y:r-c}}function d(t){return{l:t.offsetLeft,t:t.offsetTop}}function v(t){return{w:t.offsetWidth,h:t.offsetHeight}}function g(t){return X||(e(t)?t:!1)}function m(t){X=t}function y(t,n,r){return e(t)?e(n)?(e(C[t])||(C[t]={}),e(r)||(r=Object.keys(C[t]).length),C[t][r]=n,V):C[t]:C}function k(t,n){return e(t)?e(n)?(delete C[t][n],V):(C[t]={},V):(C={},V)}function x(t,n,r){if(!e(C[t]))return V;if(e(r))e(C[t][r])&&C[t][r].apply(V,n);else for(var o in C[t])C[t][o].apply(V,n);return V}function H(t,e){t&&"h"!==t||x("change:h",e),t&&"sv"!==t||x("change:sv",e),x("change",e)}function b(t,e){return S.setTimeout(t,e)}function w(){return B.parentNode}function M(){var e=v(T).w,n=S.innerHeight,r=Math.max(R.scrollLeft,T.scrollLeft),o=Math.max(R.scrollTop,T.scrollTop),c=e+r,u=n+o;return W=d(t).l,q=d(t).t+v(t).h,W+F>c&&(W=c-F),q+J>u&&(q=u-J),B.style.left=W+"px",B.style.top=q+"px",x("fit",[V]),V}function E(e){function c(t){x("before.click",[V]),b(function(){E(),x("click",[V])},.1),t.preventDefault()}function u(t){var e=(r(_),r([_[0],1,1]));I.style.backgroundColor="rgb("+e.join(",")+")",m(_),t&&t.preventDefault()}function s(t){var e=n(p(j,t).y,0,k);_[0]=(k-e)/k,D.style.top=e-T/2+"px",u(t)}function i(t){var e=p(I,t),r=n(e.x,0,X),o=n(e.y,0,C);_[1]=1-(X-r)/X,_[2]=(C-o)/C,P.style.right=X-r-$/2+"px",P.style.top=o-W/2+"px",u(t)}function a(t){A&&(s(t),K=o(_),Y||(x("drag:h",[K,V]),x("drag",[K,V])),H("h",[K,V])),O&&(i(t),K=o(_),z||(x("drag:sv",[K,V]),x("drag",[K,V])),H("sv",[K,V])),Y=!1,z=!1}function f(){if(!e){var t=A?"h":"sv",n=[o(_),V];x("stop:"+t,n),x("stop",n),H(t,n)}A=!1,O=!1}function d(t){Y=!0,A=!0,a(t),x("start:h",[K,V]),x("start",[K,V]),H("h",[K,V])}function y(t){z=!0,O=!0,a(t),x("start:sv",[K,V]),x("start",[K,V]),H("sv",[K,V])}e||R.appendChild(B),F=v(B).w,J=v(B).h;var k=v(j).h,X=v(I).w,C=v(I).h,T=v(D).h,$=v(P).w,W=v(P).h;e?(B.style.left="-9999px",B.style.top="-9999px",l("resize",S,M),l("touchdown",t,c),l("click",t,c),V.create=function(){return x("before.create",[V]),b(function(){E(1),x("create",[V])},.1),V},V.destroy=function(){return h("touchdown",t,c),h("click",t,c),m(!1),L(),x("destroy",[V]),V}):(M(),x("enter",[V])),G=function(){_=g(_),u(),D.style.top=k-T/2-k*+_[0]+"px",P.style.right=X-$/2-X*+_[1]+"px",P.style.top=C-W/2-C*+_[2]+"px"},L=function(){return w()&&w().removeChild(B),h("touchmove",N,a),h("mousemove",N,a),h("touchend",N,f),h("mouseup",N,f),h("touchdown",N,L),h("click",N,L),x("before.exit",[V]),b(function(){w()||x("exit",[V])},.11),V},G(),l("touchstart",j,d),l("mousedown",j,d),l("touchstart",I,y),l("mousedown",I,y),l("touchmove",N,a),l("mousemove",N,a),l("touchend",N,f),l("mouseup",N,f),l("touchdown",N,L),l("click",N,L)}var S=window,N=document,V=this,X=!1,C={},B=N.createElement("div");V.parse=function(t){if("object"==typeof t)return t;var e=/\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i.exec(t),n=/\s*hsv\s*\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)\s*$/i.exec(t),r="#"===t[0]&&t.match(/^#([\da-f]{3}|[\da-f]{6})$/);return r?s(t.slice(1)):n?a([+n[1],+n[2],+n[3]]):e?c([+e[1],+e[2],+e[3]]):[0,1,1]},m(V.parse(t.getAttribute("data-color")||t.value||[0,1,1])),B.className="color-picker",B.innerHTML='<div class="color-picker-control"><span class="color-picker-h"><i></i></span><span class="color-picker-sv"><i></i></span></div>';var G,L,R=N.body,T=N.documentElement,$=B.firstChild.children,_=g([0,1,1]),j=$[0],I=$[1],D=j.firstChild,P=I.firstChild,Y=!1,z=!1,A=!1,O=!1,W=0,q=0,F=0,J=0,K=o(_);return E(1),x("before.create",[V]),b(function(){K=o(_),x("create",[K,V]),H(0,[K,V])},.1),V.target=t,V.picker=B,V.on=y,V.off=k,V.trigger=x,V.fit=M,V.set=function(t){return e(t)?("string"==typeof t&&(t=V.parse(t)),m(t),G(),V):g()},V.HSV2RGB=function(t){return r(a(t))},V._HSV2RGB=r,V.HSV2HEX=function(t){return o(a(t))},V._HSV2HEX=o,V.RGB2HSV=function(t){return f(c(t))},V._RGB2HSV=c,V.RGB2HEX=u,V.HEX2HSV=function(t){return f(s(t))},V._HEX2HSV=s,V.HEX2RGB=i,V.hooks=C,V.enter=E,V.exit=L,V};